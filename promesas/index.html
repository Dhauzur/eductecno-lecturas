<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width,
initial-scale=1.0"
    />
    <title>Promesas</title>
  </head>
  <body>
    <h4>Usando ES6 - Promesas</h4>
    <section id="contenido"></section>
    <button id="boton">Ejecutar</button>
    <script>
      boton.addEventListener("click", () => {
        getData()
          .then(autorizacion => {
            if (autorizacion) {
              return mostrarData();
            }
          })
          .then(usuario => {
            setTexto(`El usuario en línea es: ${usuario.nombre}`);
          });
      });

      const getData = () => {
        return new Promise((resolve, reject) => {
          setTexto("Solicitando Autorización");
          setTimeout(() => {
            resolve(false);
          }, 2500);
        });
      };
      const mostrarData = () => {
        return new Promise((resolve, reject) => {
          setTexto("Esperando la información");
          setTimeout(() => {
            resolve({ nombre: "Juan" });
          }, 2500);
        });
      };

      const setTexto = datos => {
        contenido.textContent = datos;
      };
    </script>
  </body>
</html>
